<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Australian Grants Assessment Tool | AI Startup Funding Guide</title>
    <meta name="description" content="Discover which Australian government grants match your AI startup. Get personalized eligibility assessment and a 90-day action plan for R&D Tax Incentive, IGP, CSIRO Kick-Start, and more.">
    <meta name="keywords" content="Australian grants, R&D Tax Incentive, RDTI, Industry Growth Program, CSIRO Kick-Start, startup funding, AI startup grants, government grants Australia">
    <meta name="author" content="Grant Assesser">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Australian Grants Assessment Tool">
    <meta property="og:description" content="Find the right government grants for your AI startup. Free eligibility assessment and personalized action plan.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1200&h=630&fit=crop">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Australian Grants Assessment Tool">
    <meta name="twitter:description" content="Find the right government grants for your AI startup.">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí∞</text></svg>">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        neutral: {
                            925: '#0c0c0f',
                            950: '#09090b'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: #09090b;
            color: #fafafa;
        }

        /* ============ BACKGROUND PATTERNS ============ */

        /* Dot pattern overlay */
        .bg-dots {
            background-image: radial-gradient(circle, #27272a 1px, transparent 1px);
            background-size: 24px 24px;
        }

        .bg-dots-subtle {
            background-image: radial-gradient(circle, rgba(39, 39, 42, 0.5) 1px, transparent 1px);
            background-size: 32px 32px;
        }

        /* Grid pattern overlay */
        .bg-grid {
            background-image:
                linear-gradient(rgba(39, 39, 42, 0.3) 1px, transparent 1px),
                linear-gradient(90deg, rgba(39, 39, 42, 0.3) 1px, transparent 1px);
            background-size: 48px 48px;
        }

        .bg-grid-fine {
            background-image:
                linear-gradient(rgba(39, 39, 42, 0.15) 1px, transparent 1px),
                linear-gradient(90deg, rgba(39, 39, 42, 0.15) 1px, transparent 1px);
            background-size: 24px 24px;
        }

        /* Gradient mesh for depth */
        .bg-mesh {
            background:
                radial-gradient(at 20% 20%, rgba(16, 185, 129, 0.08) 0px, transparent 50%),
                radial-gradient(at 80% 80%, rgba(16, 185, 129, 0.05) 0px, transparent 50%),
                radial-gradient(at 40% 60%, rgba(39, 39, 42, 0.4) 0px, transparent 50%);
        }

        /* Animated gradient orb */
        .bg-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            animation: float 20s ease-in-out infinite;
        }

        .bg-orb-1 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.3) 0%, transparent 70%);
            top: -100px;
            right: -100px;
            animation-delay: 0s;
        }

        .bg-orb-2 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.2) 0%, transparent 70%);
            bottom: -50px;
            left: -50px;
            animation-delay: -10s;
        }

        /* ============ ANIMATIONS ============ */

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(10px, -20px) scale(1.05); }
            50% { transform: translate(-5px, 10px) scale(0.95); }
            75% { transform: translate(-15px, -10px) scale(1.02); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(8px); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse-soft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        @keyframes glow-pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.1); }
            50% { box-shadow: 0 0 40px rgba(16, 185, 129, 0.2); }
        }

        @keyframes border-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Animation classes */
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        .animate-fade-out {
            animation: fadeOut 0.2s ease-out forwards;
        }

        .animate-slide-up {
            animation: slideUp 0.6s ease-out forwards;
        }

        .animate-pulse-soft {
            animation: pulse-soft 3s ease-in-out infinite;
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        .animate-glow {
            animation: glow-pulse 4s ease-in-out infinite;
        }

        /* Staggered animation delays */
        .stagger-1 { animation-delay: 0.1s; opacity: 0; }
        .stagger-2 { animation-delay: 0.2s; opacity: 0; }
        .stagger-3 { animation-delay: 0.3s; opacity: 0; }
        .stagger-4 { animation-delay: 0.4s; opacity: 0; }
        .stagger-5 { animation-delay: 0.5s; opacity: 0; }

        /* ============ BUTTON STYLES ============ */

        .btn-primary {
            background-color: #fafafa;
            color: #09090b;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }

        .btn-primary:hover {
            background-color: #e4e4e7;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px -8px rgba(250, 250, 250, 0.2);
        }

        .btn-primary:hover::before {
            transform: translateX(100%);
        }

        .btn-secondary {
            background-color: transparent;
            border: 1px solid #27272a;
            color: #a1a1aa;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-secondary:hover {
            border-color: #3f3f46;
            color: #fafafa;
            background-color: rgba(39, 39, 42, 0.3);
        }

        /* Gradient border button */
        .btn-glow {
            position: relative;
            background: #18181b;
            border: none;
            z-index: 1;
        }

        .btn-glow::before {
            content: '';
            position: absolute;
            inset: -1px;
            background: linear-gradient(135deg, #10b981, #059669, #10b981);
            background-size: 200% 200%;
            border-radius: inherit;
            z-index: -1;
            animation: border-flow 3s ease infinite;
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }

        .btn-glow:hover::before {
            opacity: 1;
        }

        /* ============ CARD STYLES ============ */

        .card {
            background-color: rgba(24, 24, 27, 0.8);
            backdrop-filter: blur(8px);
            border: 1px solid #27272a;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card:hover {
            border-color: #3f3f46;
            transform: translateY(-2px);
            box-shadow: 0 12px 40px -12px rgba(0, 0, 0, 0.5);
        }

        .card-elevated {
            background-color: rgba(24, 24, 27, 0.9);
            backdrop-filter: blur(12px);
            border: 1px solid #27272a;
            box-shadow: 0 8px 32px -8px rgba(0, 0, 0, 0.5);
        }

        .card-glow {
            position: relative;
        }

        .card-glow::before {
            content: '';
            position: absolute;
            inset: -1px;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), transparent, rgba(16, 185, 129, 0.1));
            border-radius: inherit;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card-glow:hover::before {
            opacity: 1;
        }

        /* ============ DECORATIVE ELEMENTS ============ */

        /* Floating dots decoration */
        .floating-dots {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #10b981;
            border-radius: 50%;
            opacity: 0.5;
            animation: float 8s ease-in-out infinite;
        }

        /* Corner accents */
        .corner-accent {
            position: absolute;
            width: 100px;
            height: 100px;
            border: 1px solid rgba(16, 185, 129, 0.2);
            pointer-events: none;
        }

        .corner-accent-tl {
            top: -1px;
            left: -1px;
            border-right: none;
            border-bottom: none;
            border-top-left-radius: inherit;
        }

        .corner-accent-br {
            bottom: -1px;
            right: -1px;
            border-left: none;
            border-top: none;
            border-bottom-right-radius: inherit;
        }

        /* Shimmer effect for loading/highlights */
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        /* ============ FORM ELEMENTS ============ */

        /* Minimal scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #27272a;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #3f3f46;
        }

        /* Clean checkbox with animation */
        input[type="checkbox"] {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border: 1.5px solid #3f3f46;
            border-radius: 4px;
            background-color: transparent;
            cursor: pointer;
            position: relative;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        input[type="checkbox"]:hover {
            border-color: #52525b;
            background-color: rgba(39, 39, 42, 0.3);
        }

        input[type="checkbox"]:checked {
            background-color: #10b981;
            border-color: #10b981;
            animation: pulse-soft 0.3s ease;
        }

        input[type="checkbox"]:checked::after {
            content: '';
            position: absolute;
            left: 5px;
            top: 2px;
            width: 5px;
            height: 9px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        input[type="checkbox"]:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.15);
        }

        /* Progress bar with animation */
        .progress-bar {
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        /* Subtle divider */
        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #27272a, transparent);
        }

        /* Selection highlight with glow */
        .option-selected {
            background-color: rgba(16, 185, 129, 0.08);
            border-color: #10b981 !important;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.1);
        }

        /* Score colors with glow */
        .score-high {
            color: #10b981;
            text-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }
        .score-medium {
            color: #f59e0b;
            text-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }
        .score-low {
            color: #ef4444;
            text-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }

        /* ============ INTERACTIVE STATES ============ */

        /* Radio/option hover effect */
        .option-hover {
            transition: all 0.2s ease;
        }

        .option-hover:hover {
            background-color: rgba(39, 39, 42, 0.5);
            border-color: #3f3f46;
            transform: translateX(4px);
        }

        /* Tab active indicator */
        .tab-active {
            position: relative;
        }

        .tab-active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 2px;
            background: #10b981;
            border-radius: 1px;
        }
    </style>

    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icon Components using Lucide
        const Icon = ({ name, className = "w-5 h-5" }) => {
            const ref = React.useRef(null);

            useEffect(() => {
                if (ref.current) {
                    ref.current.innerHTML = '';
                    const icon = lucide.icons[name];
                    if (icon) {
                        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                        svg.setAttribute('class', className);
                        svg.setAttribute('viewBox', '0 0 24 24');
                        svg.setAttribute('fill', 'none');
                        svg.setAttribute('stroke', 'currentColor');
                        svg.setAttribute('stroke-width', '2');
                        svg.setAttribute('stroke-linecap', 'round');
                        svg.setAttribute('stroke-linejoin', 'round');
                        svg.innerHTML = icon[2];
                        ref.current.appendChild(svg);
                    }
                }
            }, [name, className]);

            return <span ref={ref} className="inline-flex" />;
        };

        // Program Data
        const PROGRAMS = {
            rdti: {
                name: "R&D Tax Incentive",
                shortName: "RDTI",
                funding: "43.5% refundable offset",
                range: "$50K - $500K+ annually",
                effort: "20-40 hours setup",
                timeline: "10 months after FY end",
                score: 23,
                color: "#059669",
                icon: "üí∞",
                requirements: ['australian_company', 'rd_spend_20k', 'experimental_activities', 'documented_hypothesis'],
                description: "Cash back on qualifying R&D expenditure. Essential for any AI startup doing genuine research."
            },
            igp: {
                name: "Industry Growth Program",
                shortName: "IGP",
                funding: "50% matched funding",
                range: "$50K - $5M",
                effort: "40-80 hours",
                timeline: "Rolling applications",
                score: 21,
                color: "#0891b2",
                icon: "üöÄ",
                requirements: ['australian_company', 'turnover_under_20m', 'innovative_product', 'nrf_alignment'],
                description: "Two-stage program: Free Advisory Services, then grant funding for commercialization."
            },
            csiro: {
                name: "CSIRO Kick-Start",
                shortName: "CSIRO",
                funding: "1:1 matched",
                range: "$10K - $50K",
                effort: "15-30 hours",
                timeline: "Year-round, non-competitive",
                score: 20,
                color: "#7c3aed",
                icon: "üî¨",
                requirements: ['australian_company', 'turnover_under_10m_or_under_3yrs', 'can_match_funding', 'technical_challenge'],
                description: "Access CSIRO researchers and 'CSIRO-backed' credibility. High success rate."
            },
            crcp: {
                name: "CRC-P Grants",
                shortName: "CRC-P",
                funding: "1:1 matched",
                range: "$100K - $3M",
                effort: "100-200+ hours",
                timeline: "Round 18 late 2025",
                score: 19,
                color: "#dc2626",
                icon: "ü§ù",
                requirements: ['australian_company', 'research_partner', 'industry_partners', 'significant_project'],
                description: "Collaborative research grants requiring university + industry partners."
            },
            emdg: {
                name: "Export Market Development",
                shortName: "EMDG",
                funding: "50% reimbursement",
                range: "$20K - $80K/year",
                effort: "20-40 hours",
                timeline: "Round 5 TBD",
                score: 18,
                color: "#ea580c",
                icon: "üåè",
                requirements: ['australian_company', 'turnover_under_20m', 'export_ready', 'marketing_spend_20k'],
                description: "Reimbursement for export marketing activities. Up to 8 years eligibility."
            },
            accelerator: {
                name: "Startup Accelerators",
                shortName: "Accelerators",
                funding: "Equity investment",
                range: "$75K - $120K",
                effort: "Application + 12 weeks",
                timeline: "Cohort-based",
                score: 17,
                color: "#be185d",
                icon: "‚ö°",
                requirements: ['australian_company', 'early_stage', 'coachable_team', 'scalable_model'],
                description: "Startmate, Google AI First, MAP - mentorship, network, and investment."
            }
        };

        // Assessment Questions
        const ASSESSMENT_QUESTIONS = [
            {
                id: 'company_stage',
                category: 'Company Profile',
                question: 'What stage is your company at?',
                type: 'single',
                options: [
                    { value: 'idea', label: 'Idea Stage', description: 'Concept only, no product yet' },
                    { value: 'mvp', label: 'MVP/Prototype', description: 'Working prototype or early product' },
                    { value: 'early_revenue', label: 'Early Revenue', description: 'Some customers, <$500K revenue' },
                    { value: 'growth', label: 'Growth Stage', description: '$500K+ revenue, scaling' }
                ]
            },
            {
                id: 'australian_company',
                category: 'Company Profile',
                question: 'Is your company registered in Australia with an ACN?',
                type: 'boolean',
                required: true
            },
            {
                id: 'turnover',
                category: 'Company Profile',
                question: 'What is your annual turnover?',
                type: 'single',
                options: [
                    { value: 'under_1m', label: 'Under $1M' },
                    { value: '1m_to_10m', label: '$1M - $10M' },
                    { value: '10m_to_20m', label: '$10M - $20M' },
                    { value: 'over_20m', label: 'Over $20M' }
                ]
            },
            {
                id: 'years_operating',
                category: 'Company Profile',
                question: 'How long has your company been operating?',
                type: 'single',
                options: [
                    { value: 'under_1', label: 'Less than 1 year' },
                    { value: '1_to_3', label: '1-3 years' },
                    { value: 'over_3', label: 'More than 3 years' }
                ]
            },
            {
                id: 'location',
                category: 'Company Profile',
                question: 'Where is your company primarily based?',
                type: 'single',
                options: [
                    { value: 'vic', label: 'Victoria' },
                    { value: 'nsw', label: 'New South Wales' },
                    { value: 'qld', label: 'Queensland' },
                    { value: 'other', label: 'Other Australian state/territory' }
                ]
            },
            {
                id: 'rd_activities',
                category: 'R&D Activities',
                question: 'Does your work involve experimental activities with uncertain outcomes?',
                type: 'boolean',
                help: "Activities where you don't know if the outcome will work, involving technical uncertainty"
            },
            {
                id: 'rd_spend',
                category: 'R&D Activities',
                question: 'What is your estimated annual R&D spending?',
                type: 'single',
                options: [
                    { value: 'under_20k', label: 'Under $20K' },
                    { value: '20k_to_100k', label: '$20K - $100K' },
                    { value: '100k_to_500k', label: '$100K - $500K' },
                    { value: 'over_500k', label: 'Over $500K' }
                ]
            },
            {
                id: 'hypothesis_documentation',
                category: 'R&D Activities',
                question: 'Do you document hypotheses BEFORE conducting experiments?',
                type: 'boolean',
                help: 'Critical for R&D Tax claims - must have dated records showing hypothesis before work'
            },
            {
                id: 'ai_focus',
                category: 'Technology',
                question: 'What AI/ML activities are you engaged in?',
                type: 'multi',
                options: [
                    { value: 'model_development', label: 'Novel model/algorithm development' },
                    { value: 'fine_tuning', label: 'Fine-tuning models for new applications' },
                    { value: 'integration', label: 'AI system integration' },
                    { value: 'api_usage', label: 'Using AI APIs (OpenAI, Claude, etc.)' },
                    { value: 'none', label: 'No AI/ML focus' }
                ]
            },
            {
                id: 'nrf_sector',
                category: 'Technology',
                question: 'Which National Reconstruction Fund priority areas align with your work?',
                type: 'multi',
                options: [
                    { value: 'medical', label: 'Medical science & health tech' },
                    { value: 'renewables', label: 'Renewables & low emission tech' },
                    { value: 'manufacturing', label: 'Advanced manufacturing' },
                    { value: 'agriculture', label: 'Agriculture value-add' },
                    { value: 'defence', label: 'Defence capability' },
                    { value: 'enabling', label: 'Enabling capabilities (software/AI)' },
                    { value: 'none', label: 'None of the above' }
                ]
            },
            {
                id: 'research_partnerships',
                category: 'Partnerships',
                question: 'Do you have existing relationships with research institutions?',
                type: 'single',
                options: [
                    { value: 'none', label: 'No existing relationships' },
                    { value: 'informal', label: 'Informal connections only' },
                    { value: 'active', label: 'Active collaboration discussions' },
                    { value: 'formal', label: 'Formal research partnership in place' }
                ]
            },
            {
                id: 'industry_partners',
                category: 'Partnerships',
                question: 'Do you have industry partners (other companies) for collaborative projects?',
                type: 'boolean'
            },
            {
                id: 'export_plans',
                category: 'Market',
                question: 'Are you planning to export or expand internationally?',
                type: 'single',
                options: [
                    { value: 'no', label: 'No international plans' },
                    { value: 'considering', label: 'Considering but not active' },
                    { value: 'planning', label: 'Actively planning export strategy' },
                    { value: 'exporting', label: 'Already exporting' }
                ]
            },
            {
                id: 'market_validation',
                category: 'Market',
                question: 'What level of market validation do you have?',
                type: 'single',
                options: [
                    { value: 'none', label: 'No validation yet' },
                    { value: 'interviews', label: 'Customer interviews only' },
                    { value: 'pilots', label: 'Pilot customers or trials' },
                    { value: 'revenue', label: 'Paying customers' }
                ]
            },
            {
                id: 'cofunding_capacity',
                category: 'Financial',
                question: 'Can you provide matched co-funding for grants?',
                type: 'single',
                options: [
                    { value: 'none', label: 'No co-funding capacity' },
                    { value: 'up_to_50k', label: 'Up to $50K' },
                    { value: '50k_to_250k', label: '$50K - $250K' },
                    { value: 'over_250k', label: 'Over $250K' }
                ]
            },
            {
                id: 'financial_records',
                category: 'Financial',
                question: 'Do you have audited/reviewed financial statements?',
                type: 'boolean'
            },
            {
                id: 'team_capacity',
                category: 'Team',
                question: "What is your team's capacity for grant applications?",
                type: 'single',
                options: [
                    { value: 'minimal', label: 'Minimal - founders stretched thin' },
                    { value: 'moderate', label: 'Moderate - some bandwidth available' },
                    { value: 'dedicated', label: 'Can dedicate significant time' },
                    { value: 'resourced', label: 'Have dedicated grants/finance person' }
                ]
            },
            {
                id: 'timeline_urgency',
                category: 'Team',
                question: 'How urgent is your funding need?',
                type: 'single',
                options: [
                    { value: 'immediate', label: 'Immediate (0-3 months)' },
                    { value: 'soon', label: 'Soon (3-6 months)' },
                    { value: 'planned', label: 'Planned (6-12 months)' },
                    { value: 'opportunistic', label: 'Opportunistic - no urgency' }
                ]
            }
        ];

        // Readiness Checklist Items
        const READINESS_ITEMS = [
            { id: 'acn', category: 'Corporate', label: 'Australian Company Number (ACN)', critical: true },
            { id: 'abn', category: 'Corporate', label: 'Valid ABN', critical: true },
            { id: 'gst', category: 'Corporate', label: 'GST Registered', critical: true },
            { id: 'tax_compliance', category: 'Corporate', label: '2+ years tax compliance', critical: false },
            { id: 'financials', category: 'Financial', label: '3 years financial statements', critical: false },
            { id: 'accountant_letter', category: 'Financial', label: 'Accountant confirmation letter', critical: false },
            { id: 'bank_statements', category: 'Financial', label: 'Recent bank statements', critical: false },
            { id: 'ip_ownership', category: 'IP/Technical', label: 'Clear IP ownership documentation', critical: true },
            { id: 'rd_logs', category: 'IP/Technical', label: 'R&D experiment logs with dates', critical: true },
            { id: 'code_repos', category: 'IP/Technical', label: 'Version-controlled code repositories', critical: false },
            { id: 'trl_assessment', category: 'IP/Technical', label: 'Technology Readiness Level assessment', critical: false },
            { id: 'plan_to_market', category: 'Commercial', label: 'Plan to market document', critical: true },
            { id: 'loi', category: 'Commercial', label: 'Letters of Intent/Support', critical: false },
            { id: 'pilot_agreements', category: 'Commercial', label: 'Pilot agreements/MoUs', critical: false },
            { id: 'partner_letters', category: 'Partners', label: 'Partner commitment letters', critical: false },
            { id: 'research_mou', category: 'Partners', label: 'Research institution MoU', critical: false }
        ];

        // Landing Page Component
        function LandingPage({ onStart }) {
            return (
                <div className="min-h-screen bg-zinc-950 text-zinc-100 overflow-hidden">
                    {/* Layered background with patterns */}
                    <div className="fixed inset-0 bg-zinc-950">
                        {/* Base gradient */}
                        <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-zinc-900 via-zinc-950 to-zinc-950"></div>
                        {/* Dot pattern */}
                        <div className="absolute inset-0 bg-dots-subtle opacity-60"></div>
                        {/* Gradient mesh */}
                        <div className="absolute inset-0 bg-mesh"></div>
                        {/* Floating orbs */}
                        <div className="bg-orb bg-orb-1"></div>
                        <div className="bg-orb bg-orb-2"></div>
                    </div>

                    {/* Navigation */}
                    <nav className="relative z-10 border-b border-zinc-800/50 backdrop-blur-sm">
                        <div className="max-w-5xl mx-auto px-6 py-5 flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                <div className="w-8 h-8 rounded-lg bg-emerald-500 flex items-center justify-center animate-glow">
                                    <Icon name="trending-up" className="w-4 h-4 text-zinc-950" />
                                </div>
                                <span className="font-semibold text-lg tracking-tight">Grants</span>
                            </div>
                            <div className="flex items-center gap-8">
                                <a href="#programs" className="text-zinc-500 hover:text-zinc-100 transition-colors text-sm font-medium">Programs</a>
                                <a href="#how-it-works" className="text-zinc-500 hover:text-zinc-100 transition-colors text-sm font-medium">How It Works</a>
                                <button
                                    onClick={onStart}
                                    className="px-4 py-2 rounded-lg btn-primary text-sm"
                                >
                                    Get Started
                                </button>
                            </div>
                        </div>
                    </nav>

                    {/* Hero Section */}
                    <div className="relative">
                        {/* Grid overlay for hero */}
                        <div className="absolute inset-0 bg-grid-fine opacity-40 pointer-events-none"></div>

                        <div className="max-w-5xl mx-auto px-6 pt-24 pb-20 relative">
                            {/* Decorative floating dots */}
                            <div className="floating-dots" style={{ top: '10%', left: '70%', animationDelay: '0s' }}></div>
                            <div className="floating-dots" style={{ top: '30%', left: '85%', animationDelay: '-2s', width: '6px', height: '6px' }}></div>
                            <div className="floating-dots" style={{ top: '60%', left: '75%', animationDelay: '-4s' }}></div>

                            <div className="max-w-3xl">
                                <div className="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-xs font-medium mb-8 animate-slide-up stagger-1">
                                    <span className="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse-soft"></span>
                                    Australian Government Grants
                                </div>

                                <h1 className="text-5xl md:text-6xl font-semibold mb-6 leading-[1.1] tracking-tight animate-slide-up stagger-2">
                                    Find the right funding
                                    <br />
                                    <span className="text-zinc-500">for your startup</span>
                                </h1>

                                <p className="text-lg text-zinc-400 mb-10 max-w-xl leading-relaxed animate-slide-up stagger-3">
                                    Discover which Australian government grants match your business.
                                    Get a personalized assessment and 90-day action plan.
                                </p>

                                <div className="flex flex-col sm:flex-row gap-3 mb-20 animate-slide-up stagger-4">
                                    <button
                                        onClick={onStart}
                                        className="px-6 py-3.5 rounded-xl btn-primary text-base flex items-center justify-center gap-2 group"
                                    >
                                        Start Assessment
                                        <Icon name="arrow-right" className="w-4 h-4 transition-transform group-hover:translate-x-1" />
                                    </button>
                                    <a
                                        href="#programs"
                                        className="px-6 py-3.5 rounded-xl btn-secondary text-base flex items-center justify-center gap-2"
                                    >
                                        View Programs
                                    </a>
                                </div>

                                {/* Stats with subtle glow */}
                                <div className="flex gap-12 animate-slide-up stagger-5">
                                    <div className="group">
                                        <div className="text-3xl font-semibold text-zinc-100 mb-1 group-hover:text-emerald-400 transition-colors">$5M+</div>
                                        <div className="text-sm text-zinc-500">Potential funding</div>
                                    </div>
                                    <div className="w-px bg-zinc-800"></div>
                                    <div className="group">
                                        <div className="text-3xl font-semibold text-zinc-100 mb-1 group-hover:text-emerald-400 transition-colors">6</div>
                                        <div className="text-sm text-zinc-500">Programs analyzed</div>
                                    </div>
                                    <div className="w-px bg-zinc-800"></div>
                                    <div className="group">
                                        <div className="text-3xl font-semibold text-zinc-100 mb-1 group-hover:text-emerald-400 transition-colors">5 min</div>
                                        <div className="text-sm text-zinc-500">Assessment time</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Programs Section */}
                    <div id="programs" className="relative border-t border-zinc-800/50">
                        {/* Subtle dot pattern for this section */}
                        <div className="absolute inset-0 bg-dots opacity-30 pointer-events-none"></div>

                        <div className="max-w-5xl mx-auto px-6 py-20 relative">
                            <div className="mb-12">
                                <h2 className="text-2xl font-semibold mb-3">Programs We Assess</h2>
                                <p className="text-zinc-500 max-w-lg">
                                    Australia's top government funding programs for innovative startups
                                </p>
                            </div>

                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                                {Object.entries(PROGRAMS).map(([key, program], index) => (
                                    <div
                                        key={key}
                                        className="card card-glow rounded-xl p-5 group"
                                        style={{ animationDelay: `${index * 0.1}s` }}
                                    >
                                        <div className="flex items-start justify-between mb-4">
                                            <div className="text-2xl group-hover:scale-110 transition-transform">{program.icon}</div>
                                            <span className="text-xs font-medium text-emerald-400 bg-emerald-500/10 px-2 py-1 rounded">
                                                {program.funding}
                                            </span>
                                        </div>
                                        <h3 className="font-medium text-zinc-100 mb-2 group-hover:text-emerald-400 transition-colors">{program.name}</h3>
                                        <p className="text-sm text-zinc-500 mb-4 leading-relaxed">{program.description}</p>
                                        <div className="flex items-center gap-4 text-xs text-zinc-600">
                                            <span>{program.range}</span>
                                            <span className="w-1 h-1 rounded-full bg-zinc-700"></span>
                                            <span>{program.effort}</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* How It Works Section */}
                    <div id="how-it-works" className="relative border-t border-zinc-800/50">
                        {/* Grid pattern for this section */}
                        <div className="absolute inset-0 bg-grid opacity-20 pointer-events-none"></div>

                        <div className="max-w-5xl mx-auto px-6 py-20 relative">
                            <div className="mb-12">
                                <h2 className="text-2xl font-semibold mb-3">How It Works</h2>
                                <p className="text-zinc-500">Three steps to your personalized funding roadmap</p>
                            </div>

                            <div className="grid md:grid-cols-3 gap-8">
                                <div className="relative group">
                                    <div className="text-5xl font-bold text-zinc-800 mb-4 group-hover:text-zinc-700 transition-colors">01</div>
                                    <h3 className="text-lg font-medium mb-2 text-zinc-100">Answer Questions</h3>
                                    <p className="text-sm text-zinc-500 leading-relaxed">
                                        Tell us about your company, R&D activities, partnerships, and goals through our guided assessment.
                                    </p>
                                    {/* Connecting line */}
                                    <div className="hidden md:block absolute top-6 left-full w-full h-px bg-gradient-to-r from-zinc-700 to-transparent"></div>
                                </div>
                                <div className="relative group">
                                    <div className="text-5xl font-bold text-zinc-800 mb-4 group-hover:text-zinc-700 transition-colors">02</div>
                                    <h3 className="text-lg font-medium mb-2 text-zinc-100">Get Matched</h3>
                                    <p className="text-sm text-zinc-500 leading-relaxed">
                                        Our algorithm analyzes your responses against program requirements to determine eligibility.
                                    </p>
                                    {/* Connecting line */}
                                    <div className="hidden md:block absolute top-6 left-full w-full h-px bg-gradient-to-r from-zinc-700 to-transparent"></div>
                                </div>
                                <div className="relative group">
                                    <div className="text-5xl font-bold text-emerald-500/20 mb-4 group-hover:text-emerald-500/30 transition-colors">03</div>
                                    <h3 className="text-lg font-medium mb-2 text-zinc-100">Take Action</h3>
                                    <p className="text-sm text-zinc-500 leading-relaxed">
                                        Receive a prioritized 90-day action plan with specific steps to maximize your funding.
                                    </p>
                                </div>
                            </div>

                            <div className="mt-16 pt-16 border-t border-zinc-800/50">
                                <div className="card-elevated rounded-2xl p-8 md:p-12 text-center max-w-2xl mx-auto">
                                    <h3 className="text-xl font-semibold mb-3">Ready to find your funding?</h3>
                                    <p className="text-zinc-500 mb-6">Take the free assessment and discover your grant opportunities.</p>
                                    <button
                                        onClick={onStart}
                                        className="px-6 py-3 rounded-xl btn-primary text-base inline-flex items-center gap-2"
                                    >
                                        Start Assessment
                                        <Icon name="arrow-right" className="w-4 h-4" />
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Footer */}
                    <footer className="relative border-t border-zinc-800/50">
                        <div className="max-w-5xl mx-auto px-6 py-8">
                            <div className="flex flex-col md:flex-row items-center justify-between gap-4">
                                <div className="flex items-center gap-3">
                                    <div className="w-6 h-6 rounded bg-emerald-500 flex items-center justify-center">
                                        <Icon name="trending-up" className="w-3 h-3 text-zinc-950" />
                                    </div>
                                    <span className="font-medium text-sm">Grants</span>
                                </div>
                                <div className="text-xs text-zinc-600">
                                    Based on Australian Government programs as of December 2025
                                </div>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        }

        // Main Assessment Tool Component
        function GrantsAssessmentTool() {
            const [showLanding, setShowLanding] = useState(true);
            const [currentStep, setCurrentStep] = useState(0);
            const [answers, setAnswers] = useState({});
            const [readiness, setReadiness] = useState({});
            const [showResults, setShowResults] = useState(false);
            const [activeTab, setActiveTab] = useState('eligibility');
            const [animateIn, setAnimateIn] = useState(true);

            const steps = ['profile', 'rd', 'tech', 'partnerships', 'market', 'financial', 'team', 'readiness'];
            const stepLabels = ['Company Profile', 'R&D Activities', 'Technology', 'Partnerships', 'Market', 'Financial', 'Team', 'Readiness'];

            const getQuestionsForStep = (stepIndex) => {
                const categories = ['Company Profile', 'R&D Activities', 'Technology', 'Partnerships', 'Market', 'Financial', 'Team'];
                if (stepIndex < categories.length) {
                    return ASSESSMENT_QUESTIONS.filter(q => q.category === categories[stepIndex]);
                }
                return [];
            };

            const handleAnswer = (questionId, value) => {
                setAnswers(prev => ({ ...prev, [questionId]: value }));
            };

            const handleMultiAnswer = (questionId, value) => {
                setAnswers(prev => {
                    const current = prev[questionId] || [];
                    if (current.includes(value)) {
                        return { ...prev, [questionId]: current.filter(v => v !== value) };
                    }
                    return { ...prev, [questionId]: [...current, value] };
                });
            };

            const handleReadiness = (itemId, checked) => {
                setReadiness(prev => ({ ...prev, [itemId]: checked }));
            };

            const nextStep = () => {
                setAnimateIn(false);
                setTimeout(() => {
                    if (currentStep < steps.length - 1) {
                        setCurrentStep(prev => prev + 1);
                    } else {
                        setShowResults(true);
                    }
                    setAnimateIn(true);
                }, 200);
            };

            const prevStep = () => {
                setAnimateIn(false);
                setTimeout(() => {
                    if (currentStep > 0) {
                        setCurrentStep(prev => prev - 1);
                    }
                    setAnimateIn(true);
                }, 200);
            };

            // Calculate eligibility scores
            const calculateEligibility = () => {
                const results = {};

                // R&D Tax Incentive
                results.rdti = {
                    eligible: answers.australian_company === true &&
                            answers.rd_spend !== 'under_20k' &&
                            answers.rd_activities === true,
                    score: 0,
                    reasons: [],
                    warnings: []
                };
                if (!answers.australian_company) results.rdti.reasons.push('Must be Australian company');
                if (answers.rd_spend === 'under_20k') results.rdti.reasons.push('Minimum $20K R&D spend required');
                if (!answers.rd_activities) results.rdti.reasons.push('Must have experimental activities');
                if (!answers.hypothesis_documentation) results.rdti.warnings.push('Start documenting hypotheses BEFORE experiments');
                if (results.rdti.eligible) {
                    results.rdti.score = answers.rd_spend === 'over_500k' ? 95 : answers.rd_spend === '100k_to_500k' ? 85 : 70;
                    if (answers.hypothesis_documentation) results.rdti.score += 5;
                }

                // IGP
                results.igp = {
                    eligible: answers.australian_company === true &&
                            answers.turnover !== 'over_20m' &&
                            (answers.nrf_sector || []).length > 0 &&
                            !(answers.nrf_sector || []).includes('none'),
                    score: 0,
                    reasons: [],
                    warnings: []
                };
                if (!answers.australian_company) results.igp.reasons.push('Must be Australian company');
                if (answers.turnover === 'over_20m') results.igp.reasons.push('Turnover must be under $20M');
                if ((answers.nrf_sector || []).length === 0 || (answers.nrf_sector || []).includes('none')) {
                    results.igp.reasons.push('Must align with NRF priority areas');
                }
                if (results.igp.eligible) {
                    results.igp.score = 60;
                    if (answers.market_validation === 'revenue') results.igp.score += 20;
                    else if (answers.market_validation === 'pilots') results.igp.score += 10;
                    if ((answers.nrf_sector || []).length > 1) results.igp.score += 10;
                    if (answers.cofunding_capacity !== 'none') results.igp.score += 10;
                }

                // CSIRO Kick-Start
                results.csiro = {
                    eligible: answers.australian_company === true &&
                            (answers.turnover === 'under_1m' || answers.turnover === '1m_to_10m' || answers.years_operating !== 'over_3'),
                    score: 0,
                    reasons: [],
                    warnings: []
                };
                if (!answers.australian_company) results.csiro.reasons.push('Must be Australian company');
                if (answers.turnover === 'over_20m' || answers.turnover === '10m_to_20m') {
                    if (answers.years_operating === 'over_3') {
                        results.csiro.reasons.push('Turnover must be <$10M OR operating <3 years');
                    }
                }
                if (results.csiro.eligible) {
                    results.csiro.score = 75;
                    if (answers.cofunding_capacity !== 'none') results.csiro.score += 15;
                    if (answers.rd_activities) results.csiro.score += 10;
                }

                // CRC-P
                results.crcp = {
                    eligible: answers.australian_company === true &&
                            (answers.research_partnerships === 'active' || answers.research_partnerships === 'formal') &&
                            answers.industry_partners === true,
                    score: 0,
                    reasons: [],
                    warnings: []
                };
                if (!answers.australian_company) results.crcp.reasons.push('Must be Australian company');
                if (answers.research_partnerships !== 'active' && answers.research_partnerships !== 'formal') {
                    results.crcp.reasons.push('Requires research institution partner');
                }
                if (!answers.industry_partners) results.crcp.reasons.push('Requires 2+ industry partners');
                if (answers.team_capacity === 'minimal') results.crcp.warnings.push('CRC-P requires 100-200+ hours - consider team capacity');
                if (results.crcp.eligible) {
                    results.crcp.score = 60;
                    if (answers.research_partnerships === 'formal') results.crcp.score += 20;
                    if (answers.cofunding_capacity === 'over_250k') results.crcp.score += 20;
                }

                // EMDG
                results.emdg = {
                    eligible: answers.australian_company === true &&
                            answers.turnover !== 'over_20m' &&
                            (answers.export_plans === 'planning' || answers.export_plans === 'exporting'),
                    score: 0,
                    reasons: [],
                    warnings: []
                };
                if (!answers.australian_company) results.emdg.reasons.push('Must be Australian company');
                if (answers.turnover === 'over_20m') results.emdg.reasons.push('Turnover must be under $20M');
                if (answers.export_plans !== 'planning' && answers.export_plans !== 'exporting') {
                    results.emdg.reasons.push('Must be actively planning/executing export');
                }
                if (results.emdg.eligible) {
                    results.emdg.score = answers.export_plans === 'exporting' ? 85 : 65;
                    if (answers.cofunding_capacity !== 'none') results.emdg.score += 10;
                }

                // Accelerators
                results.accelerator = {
                    eligible: answers.australian_company === true &&
                            (answers.company_stage === 'mvp' || answers.company_stage === 'early_revenue'),
                    score: 0,
                    reasons: [],
                    warnings: []
                };
                if (!answers.australian_company) results.accelerator.reasons.push('Must be Australian company');
                if (answers.company_stage === 'idea') results.accelerator.reasons.push('Most accelerators prefer MVP stage');
                if (answers.company_stage === 'growth') results.accelerator.reasons.push('May be too advanced for accelerators');
                if (results.accelerator.eligible) {
                    results.accelerator.score = 70;
                    if (answers.market_validation === 'pilots' || answers.market_validation === 'revenue') results.accelerator.score += 15;
                    if ((answers.ai_focus || []).includes('model_development') || (answers.ai_focus || []).includes('fine_tuning')) results.accelerator.score += 15;
                }

                return results;
            };

            // Generate action plan
            const generateActionPlan = (eligibility) => {
                const actions = {
                    immediate: [],
                    shortTerm: [],
                    mediumTerm: []
                };

                // Immediate (Days 1-30)
                if (eligibility.rdti.eligible) {
                    actions.immediate.push({
                        program: 'R&D Tax Incentive',
                        action: 'Engage R&D tax specialist for initial assessment',
                        priority: 'High',
                        effort: '2-4 hours',
                        outcome: 'Understand potential claim value'
                    });
                    if (!answers.hypothesis_documentation) {
                        actions.immediate.push({
                            program: 'R&D Tax Incentive',
                            action: 'Set up R&D documentation system (Jira/Notion + Git)',
                            priority: 'Critical',
                            effort: '4-8 hours',
                            outcome: 'Compliant record-keeping for claims'
                        });
                    }
                }

                if (eligibility.igp.eligible) {
                    actions.immediate.push({
                        program: 'Industry Growth Program',
                        action: 'Apply for FREE IGP Advisory Services via business.gov.au',
                        priority: 'High',
                        effort: '2-3 hours',
                        outcome: 'Independent expert advice + pathway to grants'
                    });
                }

                if (eligibility.csiro.eligible && answers.cofunding_capacity !== 'none') {
                    actions.immediate.push({
                        program: 'CSIRO Kick-Start',
                        action: 'Submit Expression of Interest to CSIRO Kick-Start',
                        priority: 'High',
                        effort: '3-5 hours',
                        outcome: 'Access to CSIRO researchers + credibility signal'
                    });
                }

                // Short-term (Days 31-60)
                if (eligibility.igp.eligible) {
                    actions.shortTerm.push({
                        program: 'Industry Growth Program',
                        action: 'Complete IGP Advisory engagement',
                        priority: 'High',
                        effort: '10-15 hours',
                        outcome: 'Advisory Report for grant application'
                    });
                }

                if (eligibility.csiro.eligible) {
                    actions.shortTerm.push({
                        program: 'CSIRO Kick-Start',
                        action: 'Develop full CSIRO Kick-Start application with facilitator',
                        priority: 'Medium',
                        effort: '10-15 hours',
                        outcome: 'Matched funding + research collaboration'
                    });
                }

                if (eligibility.crcp.eligible) {
                    actions.shortTerm.push({
                        program: 'CRC-P Grants',
                        action: 'Formalize research partner relationships',
                        priority: 'Medium',
                        effort: '15-20 hours',
                        outcome: 'Partner commitments for Round 18'
                    });
                }

                // Medium-term (Days 61-90)
                if (eligibility.igp.eligible && eligibility.igp.score >= 70) {
                    actions.mediumTerm.push({
                        program: 'Industry Growth Program',
                        action: 'Submit IGP grant application',
                        priority: 'High',
                        effort: '30-50 hours',
                        outcome: 'Up to $5M matched funding'
                    });
                }

                if (eligibility.emdg.eligible) {
                    actions.mediumTerm.push({
                        program: 'EMDG',
                        action: 'Prepare EMDG Round 5 application materials',
                        priority: 'Medium',
                        effort: '15-20 hours',
                        outcome: 'Up to $80K/year export reimbursement'
                    });
                }

                if (eligibility.accelerator.eligible && answers.timeline_urgency === 'immediate') {
                    actions.mediumTerm.push({
                        program: 'Accelerators',
                        action: 'Apply to Startmate/Google AI First next cohort',
                        priority: 'Medium',
                        effort: '10-15 hours',
                        outcome: '$75-120K investment + network access'
                    });
                }

                return actions;
            };

            const eligibility = calculateEligibility();
            const actionPlan = generateActionPlan(eligibility);

            const getReadinessScore = () => {
                const total = READINESS_ITEMS.length;
                const checked = Object.values(readiness).filter(Boolean).length;
                return Math.round((checked / total) * 100);
            };

            const getCriticalReadiness = () => {
                const critical = READINESS_ITEMS.filter(i => i.critical);
                const checkedCritical = critical.filter(i => readiness[i.id]).length;
                return { checked: checkedCritical, total: critical.length };
            };

            // PDF Generation Function
            const generatePDF = () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();

                const pageWidth = doc.internal.pageSize.getWidth();
                const margin = 20;
                const contentWidth = pageWidth - 2 * margin;
                let yPos = 20;

                // Helper functions
                const addTitle = (text, size = 20) => {
                    doc.setFontSize(size);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(6, 182, 212); // Cyan color
                    doc.text(text, margin, yPos);
                    yPos += size * 0.5 + 5;
                };

                const addSubtitle = (text, size = 14) => {
                    doc.setFontSize(size);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(60, 60, 60);
                    doc.text(text, margin, yPos);
                    yPos += size * 0.4 + 3;
                };

                const addText = (text, size = 11) => {
                    doc.setFontSize(size);
                    doc.setFont('helvetica', 'normal');
                    doc.setTextColor(80, 80, 80);
                    const lines = doc.splitTextToSize(text, contentWidth);
                    doc.text(lines, margin, yPos);
                    yPos += lines.length * size * 0.4 + 3;
                };

                const addBullet = (text, indent = 5) => {
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'normal');
                    doc.setTextColor(80, 80, 80);
                    const lines = doc.splitTextToSize(text, contentWidth - indent - 5);
                    doc.text('-', margin + indent, yPos);
                    doc.text(lines, margin + indent + 5, yPos);
                    yPos += lines.length * 5 + 2;
                };

                const checkNewPage = (neededSpace = 30) => {
                    if (yPos + neededSpace > doc.internal.pageSize.getHeight() - 20) {
                        doc.addPage();
                        yPos = 20;
                        return true;
                    }
                    return false;
                };

                // Header
                addTitle('Australian Grants Assessment Report', 22);
                doc.setFontSize(10);
                doc.setTextColor(120, 120, 120);
                doc.text(`Generated on ${new Date().toLocaleDateString('en-AU', {
                    year: 'numeric', month: 'long', day: 'numeric'
                })}`, margin, yPos);
                yPos += 15;

                // Summary Section
                doc.setDrawColor(6, 182, 212);
                doc.setLineWidth(0.5);
                doc.line(margin, yPos, pageWidth - margin, yPos);
                yPos += 10;

                addSubtitle('EXECUTIVE SUMMARY', 16);
                yPos += 5;

                const sortedPrograms = Object.entries(eligibility)
                    .sort((a, b) => {
                        if (a[1].eligible && !b[1].eligible) return -1;
                        if (!a[1].eligible && b[1].eligible) return 1;
                        return b[1].score - a[1].score;
                    });
                const eligiblePrograms = sortedPrograms.filter(([_, e]) => e.eligible);
                const potentialValue = eligiblePrograms.reduce((acc, [key, _]) => {
                    const ranges = { rdti: 200000, igp: 500000, csiro: 50000, crcp: 500000, emdg: 80000, accelerator: 100000 };
                    return acc + (ranges[key] || 0);
                }, 0);

                addText(`Eligible Programs: ${eligiblePrograms.length} of ${Object.keys(PROGRAMS).length}`);
                addText(`Potential Funding: $${(potentialValue / 1000).toFixed(0)}K+`);
                addText(`Readiness Score: ${getReadinessScore()}%`);
                addText(`Critical Items Ready: ${getCriticalReadiness().checked} of ${getCriticalReadiness().total}`);
                yPos += 10;

                // Program Eligibility Section
                checkNewPage(50);
                addSubtitle('PROGRAM ELIGIBILITY', 16);
                yPos += 5;

                sortedPrograms.forEach(([key, result]) => {
                    checkNewPage(40);
                    const program = PROGRAMS[key];

                    doc.setFontSize(12);
                    doc.setFont('helvetica', 'bold');
                    if (result.eligible) {
                        doc.setTextColor(5, 150, 105);
                    } else {
                        doc.setTextColor(200, 80, 80);
                    }
                    doc.text(`${result.eligible ? '[YES]' : '[NO]'} ${program.name}`, margin, yPos);

                    if (result.eligible) {
                        doc.setTextColor(80, 80, 80);
                        doc.text(`Match Score: ${result.score}%`, pageWidth - margin - 40, yPos);
                    }
                    yPos += 7;

                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'normal');
                    doc.setTextColor(100, 100, 100);
                    doc.text(`${program.funding} | ${program.range}`, margin + 5, yPos);
                    yPos += 5;

                    if (!result.eligible && result.reasons.length > 0) {
                        result.reasons.forEach(reason => {
                            doc.setTextColor(180, 80, 80);
                            doc.text(`  - ${reason}`, margin + 5, yPos);
                            yPos += 4;
                        });
                    }

                    if (result.warnings.length > 0) {
                        result.warnings.forEach(warning => {
                            doc.setTextColor(200, 150, 50);
                            doc.text(`  [!] ${warning}`, margin + 5, yPos);
                            yPos += 4;
                        });
                    }
                    yPos += 5;
                });

                // 90-Day Action Plan Section
                checkNewPage(50);
                yPos += 5;
                addSubtitle('90-DAY ACTION PLAN', 16);
                yPos += 5;

                const renderActions = (title, actions, color) => {
                    if (actions.length === 0) return;
                    checkNewPage(30);

                    doc.setFontSize(12);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(...color);
                    doc.text(title, margin, yPos);
                    yPos += 7;

                    actions.forEach(action => {
                        checkNewPage(20);
                        doc.setFontSize(10);
                        doc.setFont('helvetica', 'bold');
                        doc.setTextColor(60, 60, 60);
                        const actionLines = doc.splitTextToSize(`[${action.priority}] ${action.action}`, contentWidth - 10);
                        doc.text(actionLines, margin + 5, yPos);
                        yPos += actionLines.length * 4 + 2;

                        doc.setFont('helvetica', 'normal');
                        doc.setTextColor(100, 100, 100);
                        doc.text(`Program: ${action.program} | Effort: ${action.effort}`, margin + 5, yPos);
                        yPos += 4;
                        doc.text(`Outcome: ${action.outcome}`, margin + 5, yPos);
                        yPos += 7;
                    });
                };

                renderActions('Days 1-30: Immediate Actions', actionPlan.immediate, [5, 150, 105]);
                renderActions('Days 31-60: Short-Term Actions', actionPlan.shortTerm, [6, 182, 212]);
                renderActions('Days 61-90: Medium-Term Actions', actionPlan.mediumTerm, [139, 92, 246]);

                // Stacking Strategy Section
                checkNewPage(60);
                yPos += 5;
                addSubtitle('GRANT STACKING STRATEGY', 16);
                yPos += 5;

                addText('Recommended Funding Stack:');
                yPos += 3;
                addBullet('Stage 1 (Foundation): R&D Tax Incentive + CSIRO Kick-Start');
                addBullet('Stage 2 (Growth): IGP Advisory -> IGP Grant');
                addBullet('Stage 3 (Scale): CRC-P + EMDG for export');
                yPos += 5;

                addText('Can Stack Together:');
                addBullet('R&D Tax + Any grant (co-funding qualifies for RDTI)');
                addBullet('CSIRO Kick-Start + RDTI');
                addBullet('IGP + EMDG (different purposes)');
                yPos += 5;

                addText('Cannot Stack:');
                addBullet('Grant funds as co-funding for other grants');
                addBullet('Same activities claimed across multiple grants');
                yPos += 10;

                // Readiness Checklist Summary
                checkNewPage(50);
                addSubtitle('READINESS CHECKLIST SUMMARY', 16);
                yPos += 5;

                const categories = [...new Set(READINESS_ITEMS.map(i => i.category))];
                categories.forEach(category => {
                    checkNewPage(20);
                    const items = READINESS_ITEMS.filter(i => i.category === category);
                    const checkedCount = items.filter(i => readiness[i.id]).length;

                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(60, 60, 60);
                    doc.text(`${category}: ${checkedCount}/${items.length} items ready`, margin, yPos);
                    yPos += 5;

                    items.forEach(item => {
                        doc.setFontSize(10);
                        doc.setFont('helvetica', 'normal');
                        if (readiness[item.id]) {
                            doc.setTextColor(5, 150, 105);
                        } else {
                            doc.setTextColor(150, 150, 150);
                        }
                        doc.text(`  ${readiness[item.id] ? '[x]' : '[ ]'} ${item.label}${item.critical ? ' (Critical)' : ''}`, margin + 5, yPos);
                        yPos += 4;
                    });
                    yPos += 3;
                });

                // Footer on last page
                const pageCount = doc.internal.getNumberOfPages();
                for (let i = 1; i <= pageCount; i++) {
                    doc.setPage(i);
                    doc.setFontSize(9);
                    doc.setTextColor(150, 150, 150);
                    doc.text(
                        `Page ${i} of ${pageCount} | Australian Grants Assessment Tool | Generated ${new Date().toLocaleDateString('en-AU')}`,
                        pageWidth / 2,
                        doc.internal.pageSize.getHeight() - 10,
                        { align: 'center' }
                    );
                }

                // Save the PDF
                doc.save('grants-assessment-report.pdf');
            };

            const renderQuestion = (question) => {
                if (question.type === 'boolean') {
                    return (
                        <div className="flex gap-3 mt-4">
                            <button
                                onClick={() => handleAnswer(question.id, true)}
                                className={`flex-1 p-4 rounded-xl border transition-all ${
                                    answers[question.id] === true
                                        ? 'border-emerald-500 bg-emerald-500/10 text-emerald-400'
                                        : 'border-zinc-800 hover:border-zinc-700 text-zinc-400'
                                }`}
                            >
                                <Icon name="check" className="w-5 h-5 mx-auto mb-2" />
                                <span className="font-medium text-sm">Yes</span>
                            </button>
                            <button
                                onClick={() => handleAnswer(question.id, false)}
                                className={`flex-1 p-4 rounded-xl border transition-all ${
                                    answers[question.id] === false
                                        ? 'border-red-500/50 bg-red-500/10 text-red-400'
                                        : 'border-zinc-800 hover:border-zinc-700 text-zinc-400'
                                }`}
                            >
                                <Icon name="x" className="w-5 h-5 mx-auto mb-2" />
                                <span className="font-medium text-sm">No</span>
                            </button>
                        </div>
                    );
                }

                if (question.type === 'single') {
                    return (
                        <div className="space-y-2 mt-4">
                            {question.options.map(option => (
                                <button
                                    key={option.value}
                                    onClick={() => handleAnswer(question.id, option.value)}
                                    className={`w-full p-4 rounded-xl border text-left transition-all ${
                                        answers[question.id] === option.value
                                            ? 'border-emerald-500 bg-emerald-500/5'
                                            : 'border-zinc-800 hover:border-zinc-700'
                                    }`}
                                >
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <span className={`font-medium text-sm ${answers[question.id] === option.value ? 'text-zinc-100' : 'text-zinc-300'}`}>{option.label}</span>
                                            {option.description && (
                                                <p className="text-xs text-zinc-500 mt-1">{option.description}</p>
                                            )}
                                        </div>
                                        <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${
                                            answers[question.id] === option.value
                                                ? 'border-emerald-500 bg-emerald-500'
                                                : 'border-zinc-700'
                                        }`}>
                                            {answers[question.id] === option.value && (
                                                <Icon name="check" className="w-3 h-3 text-zinc-950" />
                                            )}
                                        </div>
                                    </div>
                                </button>
                            ))}
                        </div>
                    );
                }

                if (question.type === 'multi') {
                    const selected = answers[question.id] || [];
                    return (
                        <div className="space-y-2 mt-4">
                            {question.options.map(option => (
                                <button
                                    key={option.value}
                                    onClick={() => handleMultiAnswer(question.id, option.value)}
                                    className={`w-full p-4 rounded-xl border text-left transition-all ${
                                        selected.includes(option.value)
                                            ? 'border-emerald-500 bg-emerald-500/5'
                                            : 'border-zinc-800 hover:border-zinc-700'
                                    }`}
                                >
                                    <div className="flex items-center justify-between">
                                        <span className={`font-medium text-sm ${selected.includes(option.value) ? 'text-zinc-100' : 'text-zinc-300'}`}>{option.label}</span>
                                        <div className={`w-5 h-5 rounded border-2 flex items-center justify-center ${
                                            selected.includes(option.value)
                                                ? 'border-emerald-500 bg-emerald-500'
                                                : 'border-zinc-700'
                                        }`}>
                                            {selected.includes(option.value) && (
                                                <Icon name="check" className="w-3 h-3 text-zinc-950" />
                                            )}
                                        </div>
                                    </div>
                                </button>
                            ))}
                            <p className="text-xs text-zinc-500 mt-2">Select all that apply</p>
                        </div>
                    );
                }
            };

            const renderReadinessChecklist = () => {
                const categories = [...new Set(READINESS_ITEMS.map(i => i.category))];

                return (
                    <div className="space-y-6">
                        <div className="mb-8">
                            <h3 className="text-xl font-semibold mb-2">Readiness Checklist</h3>
                            <p className="text-zinc-500 text-sm">Check off items you have ready for grant applications</p>
                        </div>

                        {categories.map(category => (
                            <div key={category} className="card rounded-xl p-5">
                                <h4 className="font-medium text-sm text-zinc-400 mb-4 uppercase tracking-wider">
                                    {category}
                                </h4>
                                <div className="space-y-1">
                                    {READINESS_ITEMS.filter(i => i.category === category).map(item => (
                                        <label
                                            key={item.id}
                                            className={`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all ${
                                                readiness[item.id] ? 'bg-emerald-500/5' : 'hover:bg-zinc-800/50'
                                            }`}
                                        >
                                            <input
                                                type="checkbox"
                                                checked={readiness[item.id] || false}
                                                onChange={(e) => handleReadiness(item.id, e.target.checked)}
                                            />
                                            <span className={`text-sm ${readiness[item.id] ? 'text-zinc-200' : 'text-zinc-400'}`}>
                                                {item.label}
                                            </span>
                                            {item.critical && (
                                                <span className="ml-auto text-xs px-2 py-0.5 rounded bg-amber-500/10 text-amber-500 font-medium">
                                                    Required
                                                </span>
                                            )}
                                        </label>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                );
            };

            const renderResults = () => {
                const sortedPrograms = Object.entries(eligibility)
                    .sort((a, b) => {
                        if (a[1].eligible && !b[1].eligible) return -1;
                        if (!a[1].eligible && b[1].eligible) return 1;
                        return b[1].score - a[1].score;
                    });

                const eligiblePrograms = sortedPrograms.filter(([_, e]) => e.eligible);
                const potentialValue = eligiblePrograms.reduce((acc, [key, _]) => {
                    const ranges = {
                        rdti: 200000,
                        igp: 500000,
                        csiro: 50000,
                        crcp: 500000,
                        emdg: 80000,
                        accelerator: 100000
                    };
                    return acc + (ranges[key] || 0);
                }, 0);

                return (
                    <div className="space-y-8">
                        {/* Summary Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div className="card rounded-xl p-5">
                                <div className="text-xs text-zinc-500 uppercase tracking-wider mb-2">Eligible Programs</div>
                                <div className="text-3xl font-semibold text-zinc-100">
                                    {eligiblePrograms.length}
                                    <span className="text-lg text-zinc-600 font-normal">/{Object.keys(PROGRAMS).length}</span>
                                </div>
                            </div>

                            <div className="card rounded-xl p-5">
                                <div className="text-xs text-zinc-500 uppercase tracking-wider mb-2">Potential Funding</div>
                                <div className="text-3xl font-semibold text-emerald-400">
                                    ${(potentialValue / 1000).toFixed(0)}K+
                                </div>
                            </div>

                            <div className="card rounded-xl p-5">
                                <div className="text-xs text-zinc-500 uppercase tracking-wider mb-2">Readiness Score</div>
                                <div className="text-3xl font-semibold text-zinc-100">
                                    {getReadinessScore()}%
                                </div>
                                <div className="text-xs text-zinc-500 mt-1">
                                    {getCriticalReadiness().checked}/{getCriticalReadiness().total} critical items
                                </div>
                            </div>
                        </div>

                        {/* Tabs */}
                        <div className="flex gap-1 p-1 bg-zinc-900 rounded-lg overflow-x-auto">
                            {['eligibility', 'action-plan', 'stack-strategy'].map(tab => (
                                <button
                                    key={tab}
                                    onClick={() => setActiveTab(tab)}
                                    className={`px-4 py-2 rounded-md text-sm font-medium transition-all whitespace-nowrap ${
                                        activeTab === tab
                                            ? 'bg-zinc-800 text-zinc-100'
                                            : 'text-zinc-500 hover:text-zinc-300'
                                    }`}
                                >
                                    {tab === 'eligibility' && 'Eligibility'}
                                    {tab === 'action-plan' && 'Action Plan'}
                                    {tab === 'stack-strategy' && 'Strategy'}
                                </button>
                            ))}
                        </div>

                        {/* Eligibility Tab */}
                        {activeTab === 'eligibility' && (
                            <div className="space-y-3">
                                {sortedPrograms.map(([key, result]) => {
                                    const program = PROGRAMS[key];
                                    return (
                                        <div
                                            key={key}
                                            className={`card rounded-xl overflow-hidden transition-all ${
                                                !result.eligible && 'opacity-50'
                                            }`}
                                        >
                                            <div className="p-5">
                                                <div className="flex flex-col md:flex-row md:items-start justify-between gap-4">
                                                    <div className="flex items-start gap-4">
                                                        <div className="text-2xl flex-shrink-0">
                                                            {program.icon}
                                                        </div>
                                                        <div>
                                                            <div className="flex items-center gap-2 mb-1">
                                                                <h3 className="font-medium text-zinc-100">{program.name}</h3>
                                                                {result.eligible ? (
                                                                    <span className="text-xs px-2 py-0.5 rounded bg-emerald-500/10 text-emerald-400 font-medium">
                                                                        Eligible
                                                                    </span>
                                                                ) : (
                                                                    <span className="text-xs px-2 py-0.5 rounded bg-zinc-800 text-zinc-500 font-medium">
                                                                        Not Eligible
                                                                    </span>
                                                                )}
                                                            </div>
                                                            <p className="text-zinc-500 text-sm">{program.description}</p>
                                                        </div>
                                                    </div>
                                                    {result.eligible && (
                                                        <div className="text-right flex-shrink-0">
                                                            <div className="text-2xl font-semibold text-emerald-400">
                                                                {result.score}%
                                                            </div>
                                                            <div className="text-xs text-zinc-500">match</div>
                                                        </div>
                                                    )}
                                                </div>

                                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t border-zinc-800">
                                                    <div>
                                                        <div className="text-xs text-zinc-600 mb-1">Funding</div>
                                                        <div className="text-sm text-zinc-300">{program.range}</div>
                                                    </div>
                                                    <div>
                                                        <div className="text-xs text-zinc-600 mb-1">Type</div>
                                                        <div className="text-sm text-zinc-300">{program.funding}</div>
                                                    </div>
                                                    <div>
                                                        <div className="text-xs text-zinc-600 mb-1">Effort</div>
                                                        <div className="text-sm text-zinc-300">{program.effort}</div>
                                                    </div>
                                                    <div>
                                                        <div className="text-xs text-zinc-600 mb-1">Timeline</div>
                                                        <div className="text-sm text-zinc-300">{program.timeline}</div>
                                                    </div>
                                                </div>

                                                {(result.reasons.length > 0 || result.warnings.length > 0) && (
                                                    <div className="mt-4 space-y-2">
                                                        {result.reasons.map((reason, i) => (
                                                            <div key={i} className="flex items-center gap-2 text-rose-400 text-sm">
                                                                <Icon name="x" className="w-4 h-4 flex-shrink-0" />
                                                                <span>{reason}</span>
                                                            </div>
                                                        ))}
                                                        {result.warnings.map((warning, i) => (
                                                            <div key={i} className="flex items-center gap-2 text-amber-400 text-sm">
                                                                <Icon name="alert-triangle" className="w-4 h-4 flex-shrink-0" />
                                                                <span>{warning}</span>
                                                            </div>
                                                        ))}
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}

                        {/* Action Plan Tab */}
                        {activeTab === 'action-plan' && (
                            <div className="space-y-6">
                                {/* Days 1-30 */}
                                <div className="card rounded-xl p-6">
                                    <div className="flex items-center gap-3 mb-5 pb-4 border-b border-zinc-800">
                                        <div className="w-10 h-10 rounded-lg bg-emerald-500/10 flex items-center justify-center">
                                            <span className="text-sm font-semibold text-emerald-400">1-30</span>
                                        </div>
                                        <div>
                                            <h3 className="text-lg font-semibold text-zinc-100">Immediate Actions</h3>
                                            <p className="text-zinc-500 text-sm">Foundation & Quick Wins</p>
                                        </div>
                                    </div>
                                    {actionPlan.immediate.length > 0 ? (
                                        <div className="space-y-3">
                                            {actionPlan.immediate.map((action, i) => (
                                                <div key={i} className="bg-zinc-900/50 rounded-lg p-4 flex flex-col md:flex-row md:items-start gap-3">
                                                    <div className={`px-2.5 py-1 rounded text-xs font-medium self-start ${
                                                        action.priority === 'Critical' ? 'bg-rose-500/10 text-rose-400' :
                                                        action.priority === 'High' ? 'bg-amber-500/10 text-amber-400' :
                                                        'bg-zinc-800 text-zinc-400'
                                                    }`}>
                                                        {action.priority}
                                                    </div>
                                                    <div className="flex-1">
                                                        <div className="font-medium text-zinc-200">{action.action}</div>
                                                        <div className="text-sm text-zinc-500 mt-1">{action.program}</div>
                                                        <div className="flex flex-wrap items-center gap-4 mt-2 text-xs text-zinc-600">
                                                            <span className="flex items-center gap-1">
                                                                <Icon name="clock" className="w-3 h-3" /> {action.effort}
                                                            </span>
                                                            <span className="flex items-center gap-1">
                                                                <Icon name="target" className="w-3 h-3" /> {action.outcome}
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    ) : (
                                        <p className="text-zinc-500">Complete the assessment to see personalized actions</p>
                                    )}
                                </div>

                                {/* Days 31-60 */}
                                <div className="card rounded-xl p-6">
                                    <div className="flex items-center gap-3 mb-5 pb-4 border-b border-zinc-800">
                                        <div className="w-10 h-10 rounded-lg bg-zinc-800 flex items-center justify-center">
                                            <span className="text-sm font-semibold text-zinc-300">31-60</span>
                                        </div>
                                        <div>
                                            <h3 className="text-lg font-semibold text-zinc-100">Short-Term Actions</h3>
                                            <p className="text-zinc-500 text-sm">Build & Validate</p>
                                        </div>
                                    </div>
                                    {actionPlan.shortTerm.length > 0 ? (
                                        <div className="space-y-3">
                                            {actionPlan.shortTerm.map((action, i) => (
                                                <div key={i} className="bg-zinc-900/50 rounded-lg p-4 flex flex-col md:flex-row md:items-start gap-3">
                                                    <div className={`px-2.5 py-1 rounded text-xs font-medium self-start ${
                                                        action.priority === 'High' ? 'bg-amber-500/10 text-amber-400' :
                                                        'bg-zinc-800 text-zinc-400'
                                                    }`}>
                                                        {action.priority}
                                                    </div>
                                                    <div className="flex-1">
                                                        <div className="font-medium text-zinc-200">{action.action}</div>
                                                        <div className="text-sm text-zinc-500 mt-1">{action.program}</div>
                                                        <div className="flex flex-wrap items-center gap-4 mt-2 text-xs text-zinc-600">
                                                            <span className="flex items-center gap-1">
                                                                <Icon name="clock" className="w-3 h-3" /> {action.effort}
                                                            </span>
                                                            <span className="flex items-center gap-1">
                                                                <Icon name="target" className="w-3 h-3" /> {action.outcome}
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    ) : (
                                        <p className="text-zinc-500">No short-term actions based on current assessment</p>
                                    )}
                                </div>

                                {/* Days 61-90 */}
                                <div className="card rounded-xl p-6">
                                    <div className="flex items-center gap-3 mb-5 pb-4 border-b border-zinc-800">
                                        <div className="w-10 h-10 rounded-lg bg-zinc-800 flex items-center justify-center">
                                            <span className="text-sm font-semibold text-zinc-300">61-90</span>
                                        </div>
                                        <div>
                                            <h3 className="text-lg font-semibold text-zinc-100">Medium-Term Actions</h3>
                                            <p className="text-zinc-500 text-sm">Execute & Scale</p>
                                        </div>
                                    </div>
                                    {actionPlan.mediumTerm.length > 0 ? (
                                        <div className="space-y-3">
                                            {actionPlan.mediumTerm.map((action, i) => (
                                                <div key={i} className="bg-zinc-900/50 rounded-lg p-4 flex flex-col md:flex-row md:items-start gap-3">
                                                    <div className={`px-2.5 py-1 rounded text-xs font-medium self-start ${
                                                        action.priority === 'High' ? 'bg-amber-500/10 text-amber-400' :
                                                        'bg-zinc-800 text-zinc-400'
                                                    }`}>
                                                        {action.priority}
                                                    </div>
                                                    <div className="flex-1">
                                                        <div className="font-medium text-zinc-200">{action.action}</div>
                                                        <div className="text-sm text-zinc-500 mt-1">{action.program}</div>
                                                        <div className="flex flex-wrap items-center gap-4 mt-2 text-xs text-zinc-600">
                                                            <span className="flex items-center gap-1">
                                                                <Icon name="clock" className="w-3 h-3" /> {action.effort}
                                                            </span>
                                                            <span className="flex items-center gap-1">
                                                                <Icon name="target" className="w-3 h-3" /> {action.outcome}
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    ) : (
                                        <p className="text-zinc-500">No medium-term actions based on current assessment</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* Stacking Strategy Tab */}
                        {activeTab === 'stack-strategy' && (
                            <div className="space-y-6">
                                <div className="card rounded-xl p-6">
                                    <h3 className="text-lg font-semibold mb-6 flex items-center gap-2 text-zinc-100">
                                        <Icon name="layers" className="w-5 h-5 text-emerald-400" />
                                        Recommended Funding Stack
                                    </h3>

                                    <div className="relative">
                                        {/* Timeline */}
                                        <div className="absolute left-5 top-6 bottom-6 w-px bg-zinc-800"></div>

                                        <div className="space-y-4 relative">
                                            {/* Stage 1 */}
                                            <div className="flex gap-4">
                                                <div className="w-10 h-10 rounded-lg bg-emerald-500/10 border border-emerald-500/30 flex items-center justify-center z-10 flex-shrink-0">
                                                    <span className="text-emerald-400 font-semibold text-sm">1</span>
                                                </div>
                                                <div className="flex-1 bg-zinc-900/50 rounded-lg p-4">
                                                    <div className="font-medium text-zinc-100">Foundation Layer</div>
                                                    <div className="text-sm text-zinc-400 mt-1">R&D Tax Incentive (ongoing) + CSIRO Kick-Start</div>
                                                    <div className="mt-2 text-xs text-zinc-600">
                                                        Start claiming R&D Tax immediately. Use CSIRO for technical validation and "CSIRO-backed" credibility.
                                                    </div>
                                                </div>
                                            </div>

                                            {/* Stage 2 */}
                                            <div className="flex gap-4">
                                                <div className="w-10 h-10 rounded-lg bg-zinc-800 border border-zinc-700 flex items-center justify-center z-10 flex-shrink-0">
                                                    <span className="text-zinc-300 font-semibold text-sm">2</span>
                                                </div>
                                                <div className="flex-1 bg-zinc-900/50 rounded-lg p-4">
                                                    <div className="font-medium text-zinc-100">Growth Layer</div>
                                                    <div className="text-sm text-zinc-400 mt-1">IGP Advisory - IGP Grant ($50K-$5M)</div>
                                                    <div className="mt-2 text-xs text-zinc-600">
                                                        Free expert advice leads to stronger grant applications. Your co-funding qualifies for R&D Tax claims.
                                                    </div>
                                                </div>
                                            </div>

                                            {/* Stage 3 */}
                                            <div className="flex gap-4">
                                                <div className="w-10 h-10 rounded-lg bg-zinc-800 border border-zinc-700 flex items-center justify-center z-10 flex-shrink-0">
                                                    <span className="text-zinc-300 font-semibold text-sm">3</span>
                                                </div>
                                                <div className="flex-1 bg-zinc-900/50 rounded-lg p-4">
                                                    <div className="font-medium text-zinc-100">Scale Layer</div>
                                                    <div className="text-sm text-zinc-400 mt-1">CRC-P ($100K-$3M) + EMDG (export)</div>
                                                    <div className="mt-2 text-xs text-zinc-600">
                                                        Use established research partnerships for CRC-P. Stack EMDG for international expansion.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Stacking Rules */}
                                <div className="grid md:grid-cols-2 gap-4">
                                    <div className="card rounded-xl p-5">
                                        <h4 className="font-medium text-zinc-100 flex items-center gap-2 mb-4">
                                            <Icon name="check" className="w-4 h-4 text-emerald-400" /> Can Stack Together
                                        </h4>
                                        <ul className="space-y-2 text-sm">
                                            <li className="flex items-start gap-2">
                                                <Icon name="check" className="w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0" />
                                                <span className="text-zinc-400">R&D Tax + Any grant (co-funding qualifies for RDTI)</span>
                                            </li>
                                            <li className="flex items-start gap-2">
                                                <Icon name="check" className="w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0" />
                                                <span className="text-zinc-400">CSIRO Kick-Start + RDTI</span>
                                            </li>
                                            <li className="flex items-start gap-2">
                                                <Icon name="check" className="w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0" />
                                                <span className="text-zinc-400">IGP + EMDG (different purposes)</span>
                                            </li>
                                            <li className="flex items-start gap-2">
                                                <Icon name="check" className="w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0" />
                                                <span className="text-zinc-400">CRC-P + RDTI</span>
                                            </li>
                                        </ul>
                                    </div>

                                    <div className="card rounded-xl p-5">
                                        <h4 className="font-medium text-zinc-100 flex items-center gap-2 mb-4">
                                            <Icon name="x" className="w-4 h-4 text-rose-400" /> Cannot Stack
                                        </h4>
                                        <ul className="space-y-2 text-sm">
                                            <li className="flex items-start gap-2">
                                                <Icon name="x" className="w-4 h-4 text-rose-400 mt-0.5 flex-shrink-0" />
                                                <span className="text-zinc-400">Grant funds as co-funding for other grants</span>
                                            </li>
                                            <li className="flex items-start gap-2">
                                                <Icon name="x" className="w-4 h-4 text-rose-400 mt-0.5 flex-shrink-0" />
                                                <span className="text-zinc-400">IGP requires CASH co-funding (not in-kind)</span>
                                            </li>
                                            <li className="flex items-start gap-2">
                                                <Icon name="x" className="w-4 h-4 text-rose-400 mt-0.5 flex-shrink-0" />
                                                <span className="text-zinc-400">Same activities claimed across multiple grants</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                {/* Reality Check */}
                                <div className="card rounded-xl p-5 border-amber-500/20">
                                    <h4 className="font-medium text-zinc-100 flex items-center gap-2 mb-4">
                                        <Icon name="alert-triangle" className="w-4 h-4 text-amber-400" /> Reality Check
                                    </h4>
                                    <div className="grid md:grid-cols-2 gap-6 text-sm">
                                        <div>
                                            <div className="font-medium text-zinc-300 mb-2">Worth Pursuing</div>
                                            <ul className="space-y-1.5 text-zinc-500">
                                                <li className="flex items-center gap-2">
                                                    <span className="w-1 h-1 rounded-full bg-emerald-400"></span>
                                                    R&D Tax: Essential if doing genuine R&D
                                                </li>
                                                <li className="flex items-center gap-2">
                                                    <span className="w-1 h-1 rounded-full bg-emerald-400"></span>
                                                    IGP Advisory: FREE expert advice
                                                </li>
                                                <li className="flex items-center gap-2">
                                                    <span className="w-1 h-1 rounded-full bg-emerald-400"></span>
                                                    CSIRO Kick-Start: High success rate, credibility
                                                </li>
                                            </ul>
                                        </div>
                                        <div>
                                            <div className="font-medium text-zinc-300 mb-2">Potential Distractions</div>
                                            <ul className="space-y-1.5 text-zinc-500">
                                                <li className="flex items-center gap-2">
                                                    <span className="w-1 h-1 rounded-full bg-zinc-600"></span>
                                                    CRC-P without research partners (6-12mo build)
                                                </li>
                                                <li className="flex items-center gap-2">
                                                    <span className="w-1 h-1 rounded-full bg-zinc-600"></span>
                                                    Multiple small grants &lt;$50K (effort exceeds value)
                                                </li>
                                                <li className="flex items-center gap-2">
                                                    <span className="w-1 h-1 rounded-full bg-zinc-600"></span>
                                                    EMDG without clear export strategy
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div className="mt-4 p-4 bg-amber-500/5 border border-amber-500/10 rounded-lg">
                                        <p className="text-zinc-400 text-sm">
                                            <span className="text-amber-400 font-medium">Remember:</span> $100K customer contract in 4 weeks beats $100K grant in 6 months.
                                            Grants should ACCELERATE, not REPLACE, commercial progress.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Action Buttons */}
                        <div className="flex flex-col sm:flex-row gap-3 justify-center pt-8">
                            <button
                                onClick={generatePDF}
                                className="btn-primary flex items-center justify-center gap-2 px-6 py-3 rounded-lg"
                            >
                                <Icon name="download" className="w-4 h-4" />
                                Download PDF Report
                            </button>
                            <button
                                onClick={() => {
                                    setShowResults(false);
                                    setCurrentStep(0);
                                    setAnswers({});
                                    setReadiness({});
                                    setActiveTab('eligibility');
                                }}
                                className="btn-secondary px-6 py-3 rounded-lg"
                            >
                                Start New Assessment
                            </button>
                        </div>
                    </div>
                );
            };

            // Show landing page
            if (showLanding) {
                return <LandingPage onStart={() => setShowLanding(false)} />;
            }

            // Show results
            if (showResults) {
                return (
                    <div className="min-h-screen bg-zinc-950 text-zinc-100 overflow-hidden">
                        {/* Layered background with patterns */}
                        <div className="fixed inset-0 bg-zinc-950">
                            <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-zinc-900 via-zinc-950 to-zinc-950"></div>
                            <div className="absolute inset-0 bg-dots-subtle opacity-40"></div>
                            <div className="bg-orb bg-orb-1" style={{ opacity: 0.3 }}></div>
                        </div>

                        <div className="relative max-w-4xl mx-auto px-4 py-12">
                            <div className="text-center mb-10 animate-slide-up">
                                <div className="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-xs font-medium mb-4">
                                    <Icon name="check-circle" className="w-3 h-3" />
                                    Assessment Complete
                                </div>
                                <h1 className="text-3xl font-semibold text-zinc-100">
                                    Your Assessment Results
                                </h1>
                                <p className="text-zinc-500 mt-2">Personalized recommendations based on your responses</p>
                            </div>
                            {renderResults()}
                        </div>
                    </div>
                );
            }

            const currentQuestions = currentStep < 7 ? getQuestionsForStep(currentStep) : [];
            const stepIcons = ['building-2', 'lightbulb', 'sparkles', 'users', 'trending-up', 'dollar-sign', 'target'];

            return (
                <div className="min-h-screen bg-zinc-950 text-zinc-100 overflow-hidden">
                    {/* Layered background with patterns */}
                    <div className="fixed inset-0 bg-zinc-950">
                        <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-zinc-900 via-zinc-950 to-zinc-950"></div>
                        <div className="absolute inset-0 bg-grid-fine opacity-30"></div>
                        <div className="bg-orb bg-orb-2" style={{ opacity: 0.25 }}></div>
                    </div>

                    <div className="relative max-w-3xl mx-auto px-4 py-12">
                        {/* Floating decorative dots */}
                        <div className="floating-dots" style={{ top: '15%', right: '10%', animationDelay: '0s' }}></div>
                        <div className="floating-dots" style={{ top: '40%', right: '5%', animationDelay: '-3s', width: '6px', height: '6px' }}></div>

                        {/* Header */}
                        <div className="text-center mb-10">
                            <div className="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-zinc-900 border border-zinc-800 text-zinc-400 text-sm mb-6 animate-slide-up stagger-1">
                                <Icon name="sparkles" className="w-3 h-3 text-emerald-400 animate-pulse-soft" />
                                Grants Assessment Tool
                            </div>
                            <h1 className="text-3xl md:text-4xl font-semibold mb-3 text-zinc-100 animate-slide-up stagger-2">
                                Australian Grants
                                <br />
                                <span className="text-zinc-400">Self-Assessment</span>
                            </h1>
                            <p className="text-zinc-500 max-w-xl mx-auto animate-slide-up stagger-3">
                                Discover which government grants match your startup's profile
                                and get a personalized 90-day action plan.
                            </p>
                        </div>

                        {/* Progress Bar */}
                        <div className="mb-10">
                            <div className="flex justify-between mb-2">
                                {stepLabels.map((label, idx) => (
                                    <div
                                        key={idx}
                                        className={`text-xs hidden md:block transition-colors ${
                                            idx === currentStep ? 'text-emerald-400' :
                                            idx < currentStep ? 'text-zinc-500' : 'text-zinc-700'
                                        }`}
                                    >
                                        {label}
                                    </div>
                                ))}
                            </div>
                            <div className="h-1 bg-zinc-800 rounded-full overflow-hidden">
                                <div
                                    className="h-full progress-bar transition-all duration-500 ease-out"
                                    style={{ width: `${((currentStep + 1) / steps.length) * 100}%` }}
                                />
                            </div>
                            <div className="text-center mt-2 text-xs text-zinc-600">
                                Step {currentStep + 1} of {steps.length}
                            </div>
                        </div>

                        {/* Question Card */}
                        <div
                            className={`card-elevated card-glow rounded-xl p-6 md:p-8 transition-all duration-300 relative ${
                                animateIn ? 'animate-fade-in' : 'animate-fade-out'
                            }`}
                        >
                            {/* Corner accents */}
                            <div className="corner-accent corner-accent-tl rounded-xl"></div>
                            <div className="corner-accent corner-accent-br rounded-xl"></div>
                            {currentStep < 7 ? (
                                <>
                                    <div className="flex items-center gap-3 mb-6 pb-4 border-b border-zinc-800">
                                        <div className="w-9 h-9 rounded-lg bg-emerald-500/10 flex items-center justify-center">
                                            <Icon name={stepIcons[currentStep]} className="w-4 h-4 text-emerald-400" />
                                        </div>
                                        <h2 className="text-xl font-semibold text-zinc-100">{stepLabels[currentStep]}</h2>
                                    </div>

                                    <div className="space-y-8">
                                        {currentQuestions.map((question) => (
                                            <div key={question.id}>
                                                <h3 className="text-base font-medium text-zinc-200">{question.question}</h3>
                                                {question.help && (
                                                    <p className="text-sm text-zinc-500 mt-1">{question.help}</p>
                                                )}
                                                {renderQuestion(question)}
                                            </div>
                                        ))}
                                    </div>
                                </>
                            ) : (
                                renderReadinessChecklist()
                            )}

                            {/* Navigation */}
                            <div className="flex justify-between mt-10 pt-6 border-t border-zinc-800">
                                <button
                                    onClick={prevStep}
                                    disabled={currentStep === 0}
                                    className={`btn-secondary flex items-center gap-2 px-5 py-2.5 rounded-lg ${
                                        currentStep === 0 ? 'opacity-40 cursor-not-allowed' : ''
                                    }`}
                                >
                                    <Icon name="chevron-left" className="w-4 h-4" />
                                    Back
                                </button>

                                <button
                                    onClick={nextStep}
                                    className="btn-primary flex items-center gap-2 px-6 py-2.5 rounded-lg"
                                >
                                    {currentStep === steps.length - 1 ? 'View Results' : 'Continue'}
                                    <Icon name="chevron-right" className="w-4 h-4" />
                                </button>
                            </div>
                        </div>

                        {/* Quick Stats */}
                        <div className="mt-6 grid grid-cols-3 gap-3 text-center">
                            <div className="card rounded-lg p-3">
                                <div className="text-xl font-semibold text-emerald-400">6</div>
                                <div className="text-xs text-zinc-500">Programs</div>
                            </div>
                            <div className="card rounded-lg p-3">
                                <div className="text-xl font-semibold text-zinc-300">$5M+</div>
                                <div className="text-xs text-zinc-500">Potential</div>
                            </div>
                            <div className="card rounded-lg p-3">
                                <div className="text-xl font-semibold text-zinc-300">90</div>
                                <div className="text-xs text-zinc-500">Day Plan</div>
                            </div>
                        </div>

                        {/* Footer */}
                        <div className="mt-10 text-center text-xs text-zinc-600">
                            <p>Based on Australian Government programs as of December 2025</p>
                            <p className="mt-1 text-zinc-700">R&D Tax Incentive - IGP - CSIRO Kick-Start - CRC-P - EMDG - Accelerators</p>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<GrantsAssessmentTool />);
    </script>
</body>
</html>
